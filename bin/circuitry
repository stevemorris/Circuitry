#!/usr/bin/env ruby

require_relative '../lib/circuitry'
require_relative '../lib/circuitry/simulator'

if ARGV.size == 1
  circuit = ARGV[0]
  folder, circuit = circuit.split('/') if circuit.include?('/')
  Circuitry.load_files(folder)

  simulator = Circuitry::Simulator.new(circuit)
  simulator.simulate
  puts simulator.print
else
  puts 'Usage:   bin/circuitry [OptionalFolderName/][CircuitName]'
  puts 'Example: bin/circuitry MyCircuit'
  puts 'Example: bin/circuitry examples/FullAdder'
end
