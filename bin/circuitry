#!/usr/bin/env ruby

require_relative '../lib/circuitry'
require_relative '../lib/circuitry/options'
require_relative '../lib/circuitry/simulator'

opts = Circuitry::Options.new(ARGV)

path = '../' + opts.path
path << '/' unless path.end_with?('/')
Dir[File.dirname(__FILE__) + '/' + path + '*.rb'].each do |file|
  require_relative path + File.basename(file, File.extname(file))
end

simulator = Circuitry::Simulator.new(opts.circuit)
simulator.simulate
puts simulator.print
